<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game</title>
<style>
    #target {
        width: 100px;
        height: 100px;
        background-color: red;
        position: absolute;
        top: 200px;
        left: 200px;
    }

    #bullet {
        width: 20px;
        height: 20px;
        background-color: blue;
        position: absolute;
        top: 0;
        left: 0;
    }
    body{
      height: 100vh;
      width: 100%;
      position: relative;
      position: relative; /* Necessary for positioning children */
      margin: 0; /* Remove default margin */
      overflow-x: hidden; 
    /* cursor: url('images/cooked_chicken.png'), auto; */

    }
</style>
</head>
<body>
    <div class="header">
        <div class="score">Score: <span></span></div>
        <div class="lifepoints">
          <div class="point"><img src="images/lifepoint.png" alt=""></div>
          <div class="point"><img src="images/lifepoint.png" alt=""></div>
          <div class="point"><img src="images/lifepoint.png" alt=""></div>
        </div>
      </div>
      <div class="container"></div>
<script>
 
//This function will creat new elemnts to append on the window
const newElement = (
  elemType,
  backgroundImg,
  width,
  height,
  bgSize,
  bgRepeat,
  left,
  top,
  position
) => {
  let elem = document.createElement(elemType)
  elem.style.background = backgroundImg
  elem.style.width = width
  elem.style.height = height
  elem.style.backgroundSize = bgSize
  elem.style.backgroundRepeat = bgRepeat
  elem.style.left = left
  elem.style.top = top
  elem.style.position = position
  return elem
}




 const dropEggs = () => {
  let containerBounds = chickensContainer.getBoundingClientRect()
  let randomX =
    Math.floor(Math.random() * containerBounds.width) + containerBounds.left

  let egg = newElement(
    'div',
    "url('images/egg.png')",
    '40px',
    '80px',
    'contain',
    'no-repeat',
    `${randomX}px`,
    `${containerBounds.bottom}px`,
    'fixed'
  )
  egg.classList.add('egg')

  document.body.appendChild(egg)
  moveEggs(egg)

  let delay = Math.floor(Math.random() * 5000) + 1000

  setTimeout(dropEggs, delay)
}

//This function responsible for moving the eggs downward
const moveEggs = (egg) => {
  let eggInterval = setInterval(function () {
    egg.style.top = egg.offsetTop + 10 + 'px'

    setTimeout(() => {
      clearInterval(eggInterval)
      egg.remove()
    }, 3000)
  }, 50)
}

//This functio will check if the bullet hit the chicken
const eggPlayerCollision = () => {
  let eggs = document.querySelectorAll('.egg')
  let lifePoints = document.querySelectorAll('.lifepoints .point')
  let remainingLife = lifePoints.length

  for (let i = 0; i < eggs.length; i++) {
    let eggBoundaries = eggs[i].getBoundingClientRect()
    console.log(eggBoundaries)

    if (
      eggBoundaries.top <= mouseY &&
      eggBoundaries.bottom >= mouseY &&
      eggBoundaries.left <= mouseX &&
      eggBoundaries.right >= mouseX
    ) {
      if (remainingLife > 0) {
        lifePoints[remainingLife - 1].style.display = 'none'
        remainingLife--
      }
    }
  }
}



</script>

<!-- 
<div id="target"></div>
<div id="bullet"></div> -->

<!-- <script>
    const target = document.getElementById('target');
    const bullet = document.getElementById('bullet');
    let score = 0;

    // Function to check if the bullet intersects with the target
    function checkCollision() {
        const targetRect = target.getBoundingClientRect();
        const bulletRect = bullet.getBoundingClientRect();

        if (
            bulletRect.top <= targetRect.bottom &&
            bulletRect.bottom >= targetRect.top &&
            bulletRect.left <= targetRect.right &&
            bulletRect.right >= targetRect.left
        ) {
            score++;
            console.log('Score:', score);
            // You can update the score display here if needed
        }
    }

    // Function to handle shooting action
    function shoot(event) {
        const bulletSpeed = 5; // Adjust bullet speed as needed
        const bulletStep = 2; // Adjust bullet step as needed
        let bulletTop = event.clientY;
        let bulletLeft = event.clientX;
        bullet.style.top = bulletTop + 'px';
        bullet.style.left = bulletLeft + 'px';

        // Move the bullet until it goes out of bounds
        const moveBullet = setInterval(function() {
            bulletTop -= bulletStep;
            bullet.style.top = bulletTop + 'px';
            checkCollision(); // Check for collision on each step

            // If the bullet goes out of bounds, stop moving it
            if (bulletTop < 0) {
                clearInterval(moveBullet);
                bullet.style.top = '0px'; // Reset bullet position
            }
        }, bulletSpeed);
    }

    // Event listener for shooting action
    window.addEventListener('click', shoot);
</script> -->

</body>
</html>
